Perfect üëç
Now we do **Appointment Domain** the *same clean way* ‚Äî **feature-first, role-agnostic**.

Think of it as:

> ‚ÄúEverything the system can do with an appointment, no matter who triggers it.‚Äù

---

# üìÖ APPOINTMENT DOMAIN ‚Äî COMPLETE FUNCTIONALITY

---

## 1Ô∏è‚É£ Appointment Entity (Core)

### What an appointment IS

A **linking entity** between:

* Patient
* Doctor
* Time slot
* Status

### Core attributes

* Appointment ID
* Patient ID
* Doctor ID
* Date
* Time slot
* Status
* Reason / notes
* Created by (system/user)
* Source (online / staff / admin)

This entity is the **heart of the system**.

---

## 2Ô∏è‚É£ Appointment Creation

### What this feature is

Booking a consultation.

### Functionality

* Create appointment
* Validate doctor availability
* Prevent slot conflicts
* Attach reason / symptoms
* Auto-assign initial status

### Rules (domain-level)

* Doctor must be active
* Slot must be available
* Appointment duration respected
* One slot = one appointment

üß† **No role logic here** ‚Äî just validation.

---

## 3Ô∏è‚É£ Appointment Viewing & Listing

### What this feature is

Fetching appointment data.

### Functionality

* List appointments
* View appointment details
* Filter by:

  * Date
  * Status
  * Doctor
  * Patient
* Pagination
* Sorting

### Domain concern

* Efficient querying
* Indexing on date, doctor, patient

---

## 4Ô∏è‚É£ Appointment Status Management

### What this feature is

Tracking lifecycle of an appointment.

### Common statuses

```
REQUESTED
CONFIRMED
RESCHEDULED
CANCELLED
COMPLETED
NO_SHOW
```

### Functionality

* Update status
* Track status history
* Timestamp each transition

‚ö†Ô∏è Status rules:

* COMPLETED ‚Üí final
* CANCELLED ‚Üí no further updates
* NO_SHOW ‚Üí auto-close

---

## 5Ô∏è‚É£ Appointment Rescheduling

### What this feature is

Changing time/date.

### Functionality

* Change date
* Change time slot
* Revalidate availability
* Track reschedule count

### Rules

* Cannot reschedule completed appointment
* Old slot must be released
* New slot must be locked

---

## 6Ô∏è‚É£ Appointment Cancellation

### What this feature is

Invalidating an appointment.

### Functionality

* Cancel appointment
* Capture cancellation reason
* Free time slot
* Update status history

### Domain decisions

* Soft cancel only
* Preserve audit trail

---

## 7Ô∏è‚É£ Appointment‚ÄìDoctor Availability Sync

### What this feature is

Keeping availability accurate.

### Functionality

* Lock slot on creation
* Unlock slot on cancel
* Block slots on leave
* Auto-handle overlapping leaves

This keeps **double booking impossible**.

---

## 8Ô∏è‚É£ Appointment‚ÄìMedical Record Link

### What this feature is

Connecting consultation to clinical data.

### Functionality

* One appointment ‚Üí zero or one medical record
* Medical record must reference appointment
* Prevent orphan records

üß† This enforces **data integrity**.

---

## 9Ô∏è‚É£ Appointment History & Audit

### What this feature is

Traceability.

### Functionality

* Track who created appointment
* Track who modified
* Store old vs new values
* Status transition logs

‚ö†Ô∏è This is **critical** for hospitals.

---

## üîî Appointment Notifications (Conceptual)

### What this feature is

Events emitted by appointment changes.

### Events

* Appointment created
* Rescheduled
* Cancelled
* Doctor assigned
* Status changed

üß† Domain emits events ‚Äî notification system consumes them later.

---

## ‚ùå EXPLICITLY NOT APPOINTMENT DOMAIN

Avoid mixing concerns.

* Payments
* Prescriptions
* Medical data entry
* User roles
* Authentication

---

## üß† Why this domain is well-shaped

‚úî Centralized
‚úî Role-independent
‚úî Extensible
‚úî Safe from logic duplication

This domain can now be used by:

* Patient booking
* Staff booking
* Admin override
* Doctor viewing

**Without changing core logic.**

---

## üîë Next logical steps

Pick one üëá
1Ô∏è‚É£ Map **which roles can trigger which appointment actions**
2Ô∏è‚É£ Design **DB schema for appointments & slots**
3Ô∏è‚É£ Define **REST APIs for appointment domain**
4Ô∏è‚É£ Move to **Medical Records domain**

Tell me what you want next and we‚Äôll continue cleanly üöÄ
